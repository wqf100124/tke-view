import{_ as t,r as o,o as c,a as l,b as n,d as e,F as r,c as a,e as s}from"./app.52f58217.js";const i={},u=a('<h1 id="rabbitmq\u73AF\u5883" tabindex="-1"><a class="header-anchor" href="#rabbitmq\u73AF\u5883" aria-hidden="true">#</a> RabbitMQ\u73AF\u5883</h1><h2 id="\u642D\u5EFA\u73AF\u5883" tabindex="-1"><a class="header-anchor" href="#\u642D\u5EFA\u73AF\u5883" aria-hidden="true">#</a> \u642D\u5EFA\u73AF\u5883</h2><h3 id="\u521B\u5EFArabbitmq\u670D\u52A1\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFArabbitmq\u670D\u52A1\u5BB9\u5668" aria-hidden="true">#</a> \u521B\u5EFArabbitmq\u670D\u52A1\u5BB9\u5668</h3>',3),k=s("\u5B98\u65B9\u955C\u50CF\uFF1A"),b={href:"https://hub.docker.com/_/rabbitmq",target:"_blank",rel:"noopener noreferrer"},d=s("https://hub.docker.com/_/rabbitmq"),m=a(`<div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">docker</span> run -d --name rabbitmq --restart no --network tke --ip <span class="token number">172.16</span>.1.56 -p <span class="token number">5672</span>:5672 -p <span class="token number">15672</span>:15672 rabbitmq:3.9-management-alpine
</code></pre></div>`,1),g=s("\u7BA1\u7406\u7AEF: "),h={href:"http://localhost:15672",target:"_blank",rel:"noopener noreferrer"},q=s("http://localhost:15672"),y=n("br",null,null,-1),f=s(" \u8D26\u53F7\uFF1Aguest"),v=n("br",null,null,-1),x=s(" \u5BC6\u7801\uFF1Aguest"),_=a(`<h2 id="\u9879\u76EE\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u9879\u76EE\u914D\u7F6E" aria-hidden="true">#</a> \u9879\u76EE\u914D\u7F6E</h2><h3 id="mq\u6587\u4EF6\u5939" tabindex="-1"><a class="header-anchor" href="#mq\u6587\u4EF6\u5939" aria-hidden="true">#</a> mq\u6587\u4EF6\u5939</h3><p><em>\u4EE5USA\u56FD\u5BB6\u4E3A\u4F8B\uFF0C\u5176\u5B83\u56FD\u5BB6\u53EF\u4F5C\u4E3A\u53C2\u8003</em></p><p>\u590D\u5236\u56FD\u5BB6\u4E0B\u7684mq\u6587\u4EF6\u5939\u5230<strong>core</strong>\u76EE\u5F55\u4E0B</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">cp</span> ./usa/mq/ ./core/mq
</code></pre></div><h3 id="viewlogger\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#viewlogger\u914D\u7F6E" aria-hidden="true">#</a> ViewLogger\u914D\u7F6E</h3><p>\u590D\u5236\u56FD\u5BB6\u4E0B\u7684ViewLoggerConfig.php\u6587\u4EF6\u5230<strong>core</strong>\u76EE\u5F55\u4E0B</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">cp</span> ./usa/ViewLoggerConfig.php ./core/ViewLoggerConfig.php
</code></pre></div><h3 id="amqp\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#amqp\u914D\u7F6E" aria-hidden="true">#</a> Amqp\u914D\u7F6E</h3><p>\u4FEE\u6539Amqp\u914D\u7F6E\u6587\u4EF6: mq/RabbitMQConfig.php</p><p>\u914D\u7F6E\u793A\u4F8B\uFF1A</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token doc-comment comment">/**
 * This is rabbitmq config info file
 */</span>
<span class="token variable">$rabbitMQConfig</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string double-quoted-string">&quot;Connection&quot;</span> <span class="token operator">=&gt;</span><span class="token punctuation">[</span>
        <span class="token punctuation">[</span>
            <span class="token string single-quoted-string">&#39;Host&#39;</span>     <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;172.16.1.56&#39;</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;AmqpPort&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">5672</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string double-quoted-string">&quot;Auth&quot;</span>       <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>
        <span class="token string single-quoted-string">&#39;UserName&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;guest&#39;</span><span class="token punctuation">,</span>
        <span class="token string single-quoted-string">&#39;Password&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;guest&#39;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;VHost&#39;</span>      <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;/&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;Exchange&#39;</span>   <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;amq.direct&#39;</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="topic\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#topic\u914D\u7F6E" aria-hidden="true">#</a> Topic\u914D\u7F6E</h3><p>\u4FEE\u6539Topic\u914D\u7F6E\u6587\u4EF6: mq/TopicDeclaration.json</p><p>\u914D\u7F6E\u793A\u4F8B\uFF1A</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;MQVendor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rabbitmq&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;WaitForConfirmTimeout&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Topics&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;ExampleTopicKey&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;JSONSchema&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;Producer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;Route&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ExampleQueue&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;IsConfirmMode&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;GatewayScopes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Dispatcher&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token property">&quot;DefaultTransformations&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;DefaultValidators&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;Consumer&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;BindingQueue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ExampleQueue&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;PoolSize&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;SleepSeconds&quot;</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
                <span class="token property">&quot;Handlers&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token string">&quot;\\VIEW\\Amqp\\ExampleQueueHandler&quot;</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token property">&quot;RunTime&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;00:00-23:59&quot;</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="\u4EE3\u7801\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u4EE3\u7801\u793A\u4F8B" aria-hidden="true">#</a> \u4EE3\u7801\u793A\u4F8B</h2><h3 id="\u751F\u4EA7\u8005" tabindex="-1"><a class="header-anchor" href="#\u751F\u4EA7\u8005" aria-hidden="true">#</a> \u751F\u4EA7\u8005</h3><p>\u6587\u4EF6\u8DEF\u5F84\uFF1Acore/web/amqp.php</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">use</span> <span class="token package">VIEW<span class="token punctuation">\\</span>Util<span class="token punctuation">\\</span>MQ<span class="token punctuation">\\</span>MessageDispatcher</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">VIEW<span class="token punctuation">\\</span>Util<span class="token punctuation">\\</span>MQ<span class="token punctuation">\\</span>Message</span><span class="token punctuation">;</span>

<span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;NO_USER_REQUIRED&#39;</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;NO_CLOSE_SESSION&#39;</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;NO_PERMISSION_REQUIRED&#39;</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">require_once</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;{$_SERVER[&quot;</span><span class="token constant">DOCUMENT_ROOT</span><span class="token string double-quoted-string">&quot;]}/../sys/libs/init.lib&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u6D88\u606F\u5904\u7406\u7C7B\u578B</span>
    <span class="token variable">$type</span> <span class="token operator">=</span> <span class="token function">in_array</span><span class="token punctuation">(</span><span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;type&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;unpredictable&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;retry&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;type&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token string single-quoted-string">&#39;normal&#39;</span><span class="token punctuation">;</span>

    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token variable">$number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u6784\u5EFA\u6D88\u606F\u4F53</span>
        <span class="token variable">$message</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Message</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token string single-quoted-string">&#39;id&#39;</span>      <span class="token operator">=&gt;</span> <span class="token variable">$number</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;type&#39;</span>    <span class="token operator">=&gt;</span> <span class="token variable">$type</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;content&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;example&#39;</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;time&#39;</span>    <span class="token operator">=&gt;</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// \u5206\u53D1\u6D88\u606F\u5230\u961F\u5217</span>
        <span class="token punctuation">(</span><span class="token class-name static-context">MessageDispatcher</span><span class="token operator">::</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;ExampleTopicKey&#39;</span><span class="token punctuation">,</span> <span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">echo</span> <span class="token string double-quoted-string">&quot;success!&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> <span class="token variable">$e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">echo</span> <span class="token variable">$e</span><span class="token operator">-&gt;</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h3 id="\u6D88\u8D39\u8005" tabindex="-1"><a class="header-anchor" href="#\u6D88\u8D39\u8005" aria-hidden="true">#</a> \u6D88\u8D39\u8005</h3><p>\u6587\u4EF6\u8DEF\u5F84\uFF1Acore/sys/libs/logic/Amqp/ExampleQueueHandler.php</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">VIEW<span class="token punctuation">\\</span>Amqp</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">VIEW<span class="token punctuation">\\</span>Util<span class="token punctuation">\\</span>MQ<span class="token punctuation">\\</span>Exception<span class="token punctuation">\\</span>AutoRetryException</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">VIEW<span class="token punctuation">\\</span>Util<span class="token punctuation">\\</span>MQ<span class="token punctuation">\\</span>Exception<span class="token punctuation">\\</span>UnRecoverableException</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">VIEW<span class="token punctuation">\\</span>Util<span class="token punctuation">\\</span>MQ<span class="token punctuation">\\</span>Message</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">VIEW<span class="token punctuation">\\</span>Util<span class="token punctuation">\\</span>MQ<span class="token punctuation">\\</span>MessageHandler</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">ExampleQueueHandler</span> <span class="token keyword">implements</span> <span class="token class-name">MessageHandler</span>
<span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * \u961F\u5217\u6D88\u606F\u5904\u7406
     *
     * <span class="token keyword">@param</span> <span class="token class-name">Message</span> <span class="token parameter">$message</span>
     * <span class="token keyword">@throws</span> <span class="token class-name">AutoRetryException</span>
     * <span class="token keyword">@throws</span> <span class="token class-name">UnRecoverableException</span>
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">process</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// \u6D88\u606F\u5185\u5BB9</span>
        <span class="token variable">$payload</span> <span class="token operator">=</span> <span class="token variable">$message</span><span class="token operator">-&gt;</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token variable">$payload</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;type&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token string single-quoted-string">&#39;unpredictable&#39;</span><span class="token punctuation">:</span>
                <span class="token comment">// \u5C06\u4F1A\u88AB\u6254\u5230\u6B7B\u961F\u5217(BrokenMessages)</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnRecoverableException</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Message will be abandoned from the queue.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">case</span> <span class="token string single-quoted-string">&#39;retry&#39;</span><span class="token punctuation">:</span>
                <span class="token comment">// \u5C06\u4F1A\u6254\u56DE\u961F\u52173\u6B21\uFF0C3\u6B21\u5904\u7406\u540E\u4F9D\u65E7\u5931\u8D25\u7684\uFF0C\u4E0D\u4F1A\u88AB\u6254\u5230\u6B7B\u961F\u5217(BrokenMessages)\uFF0C\u800C\u662F\u76F4\u63A5\u4ECE\u961F\u5217\u4E2D\u79FB\u9664</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">AutoRetryException</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Message need to be reprocessed.&#39;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// \u9ED8\u8BA4\uFF1A\u8FD9\u6761\u6D88\u606F\u5C06\u4F1A\u4ECE\u961F\u5217\u4E2D\u79FB\u9664</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h2 id="\u57FA\u672C\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#\u57FA\u672C\u547D\u4EE4" aria-hidden="true">#</a> \u57FA\u672C\u547D\u4EE4</h2><h3 id="\u5F00\u53D1\u73AF\u5883" tabindex="-1"><a class="header-anchor" href="#\u5F00\u53D1\u73AF\u5883" aria-hidden="true">#</a> \u5F00\u53D1\u73AF\u5883</h3><p>\u521B\u5EFA\u961F\u5217(\u4EE5preview\u73AF\u5883\u4E3A\u4F8B)</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> --user preview -w /home/tke/preview/core tke php sys/libs/logic/Util/MQ/Misc/RabbitMQUtility.php ExampleQueue ExampleQueue
</code></pre></div><p>\u6D88\u8D39\u961F\u5217(\u4EE5preview\u73AF\u5883\u4E3A\u4F8B)</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> --user preview -w /home/tke/preview/core tke php sys/libs/logic/Util/MQ/MessageProcessor.php usa ExampleTopicKey
</code></pre></div><h3 id="\u751F\u4EA7\u73AF\u5883" tabindex="-1"><a class="header-anchor" href="#\u751F\u4EA7\u73AF\u5883" aria-hidden="true">#</a> \u751F\u4EA7\u73AF\u5883</h3><p>\u521B\u5EFA\u961F\u5217</p><div class="language-bash ext-sh"><pre class="language-bash"><code>allcountry:::sys/libs/logic/Util/MQ/Misc/RabbitMQUtility.php ExampleQueue ExampleQueue
</code></pre></div><p>\u542F\u52A8\u670D\u52A1</p><div class="language-bash ext-sh"><pre class="language-bash"><code>usa:::sys/libs/logic/Util/MQ/ConsumeMediator.php:start:ExampleTopicKey
</code></pre></div><p>\u505C\u6B62\u670D\u52A1</p><div class="language-bash ext-sh"><pre class="language-bash"><code>usa:::sys/libs/logic/Util/MQ/ConsumeMediator.php:stop:ExampleTopicKey
</code></pre></div><h2 id="\u5E38\u89C1\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u5E38\u89C1\u95EE\u9898" aria-hidden="true">#</a> \u5E38\u89C1\u95EE\u9898</h2><h3 id="\u961F\u5217\u6D88\u8D39\u8FDB\u7A0B\u51FA\u73B0\u62A5\u9519" tabindex="-1"><a class="header-anchor" href="#\u961F\u5217\u6D88\u8D39\u8FDB\u7A0B\u51FA\u73B0\u62A5\u9519" aria-hidden="true">#</a> \u961F\u5217\u6D88\u8D39\u8FDB\u7A0B\u51FA\u73B0\u62A5\u9519</h3><p>core/sys/libs/logic/Util/MQ/MessageProcessor.php (\u7EA6173\u884C)</p><p>\u67E5\u627E\u5E76\u6CE8\u91CA\u6389\u8FD9\u4E2A\u65B9\u6CD5</p><div class="language-php ext-php"><pre class="language-php"><code><span class="token function">pcntl_signal_dispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>`,41);function w(E,M){const p=o("ExternalLinkIcon");return c(),l(r,null,[u,n("p",null,[k,n("a",b,[d,e(p)])]),m,n("p",null,[g,n("a",h,[q,e(p)]),y,f,v,x]),_],64)}var U=t(i,[["render",w],["__file","rabbitmq.html.vue"]]);export{U as default};
