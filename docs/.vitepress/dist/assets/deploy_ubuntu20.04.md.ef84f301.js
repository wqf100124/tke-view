import{_ as s,c as a,o as n,a as p}from"./app.f8e37f6d.js";const A=JSON.parse('{"title":"Ubuntu20.04\u4E0B\u642D\u5EFA\u751F\u4EA7\u73AF\u5883","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u7528\u6237","slug":"\u7528\u6237"},{"level":2,"title":"Docker","slug":"docker"},{"level":2,"title":"Nodejs","slug":"nodejs"},{"level":2,"title":"Nginx","slug":"nginx"},{"level":2,"title":"PHP","slug":"php"},{"level":3,"title":"php-fpm","slug":"php-fpm"},{"level":3,"title":"amqp","slug":"amqp"},{"level":3,"title":"Composer","slug":"composer"},{"level":2,"title":"Supervisor","slug":"supervisor"},{"level":3,"title":"Laravel octane","slug":"laravel-octane"},{"level":2,"title":"Cron(\u5B9A\u65F6\u4EFB\u52A1)","slug":"cron-\u5B9A\u65F6\u4EFB\u52A1"},{"level":2,"title":"Redis","slug":"redis"},{"level":2,"title":"PostgreSQL","slug":"postgresql"},{"level":3,"title":"\u8FDC\u7A0B\u8FDE\u63A5","slug":"\u8FDC\u7A0B\u8FDE\u63A5"},{"level":3,"title":"\u4FEE\u6539\u7AEF\u53E3\u53F7/\u6700\u5927\u8FDE\u63A5\u6570","slug":"\u4FEE\u6539\u7AEF\u53E3\u53F7-\u6700\u5927\u8FDE\u63A5\u6570"},{"level":3,"title":"\u57FA\u7840\u64CD\u4F5C","slug":"\u57FA\u7840\u64CD\u4F5C"},{"level":2,"title":"Swap\u5206\u533A(\u5C0F\u5185\u5B58\u4E3B\u673A)","slug":"swap\u5206\u533A-\u5C0F\u5185\u5B58\u4E3B\u673A"}],"relativePath":"deploy/ubuntu20.04.md"}'),l={name:"deploy/ubuntu20.04.md"},e=p(`<h1 id="ubuntu20-04\u4E0B\u642D\u5EFA\u751F\u4EA7\u73AF\u5883" tabindex="-1">Ubuntu20.04\u4E0B\u642D\u5EFA\u751F\u4EA7\u73AF\u5883 <a class="header-anchor" href="#ubuntu20-04\u4E0B\u642D\u5EFA\u751F\u4EA7\u73AF\u5883" aria-hidden="true">#</a></h1><h2 id="\u7528\u6237" tabindex="-1">\u7528\u6237 <a class="header-anchor" href="#\u7528\u6237" aria-hidden="true">#</a></h2><p>\u521B\u5EFA\u65B0\u7528\u6237</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ useradd -d /home/wade -m -g root -s /usr/bin/bash wade</span></span>
<span class="line"></span></code></pre></div><h2 id="docker" tabindex="-1">Docker <a class="header-anchor" href="#docker" aria-hidden="true">#</a></h2><p>\u5B89\u88C5</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ apt install docker.io</span></span>
<span class="line"></span></code></pre></div><p>\u521B\u5EFA\u7F51\u7EDC</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ docker network create --subnet=172.16.0.0/24 web</span></span>
<span class="line"></span></code></pre></div><h2 id="nodejs" tabindex="-1">Nodejs <a class="header-anchor" href="#nodejs" aria-hidden="true">#</a></h2><blockquote><p>NodeSource \u662F\u4E00\u4E2A\u516C\u53F8\uFF0C\u805A\u7126\u4E8E\u63D0\u4F9B\u4F01\u4E1A\u7EA7\u7684 Node \u652F\u6301\u3002\u5B83\u7EF4\u62A4\u4E86\u4E00\u4E2A APT \u8F6F\u4EF6\u6E90\uFF0C\u5176\u4E2D\u5305\u542B\u4E86\u5F88\u591A Node.js \u7248\u672C\u3002</p></blockquote><p><a href="https://downloads.nodesource.com/" target="_blank" rel="noopener noreferrer">https://downloads.nodesource.com/</a></p><p>\u6DFB\u52A0\u6E90</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ curl -sL https://deb.nodesource.com/setup_16.x </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sudo -E bash -</span></span>
<span class="line"></span></code></pre></div><p>\u5B89\u88C5</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ sudo apt install nodejs</span></span>
<span class="line"></span></code></pre></div><p>\u9A8C\u8BC1</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ node --version</span></span>
<span class="line"></span></code></pre></div><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ npm --version</span></span>
<span class="line"></span></code></pre></div><h2 id="nginx" tabindex="-1">Nginx <a class="header-anchor" href="#nginx" aria-hidden="true">#</a></h2><blockquote><p>nginx [engine x] is an HTTP and reverse proxy server, a mail proxy server, and a generic TCP/UDP proxy server</p></blockquote><p><a href="https://nginx.org/en/download.html" target="_blank" rel="noopener noreferrer">https://nginx.org/en/download.html</a></p><p>\u5B89\u88C5</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ apt-get install -y nginx</span></span>
<span class="line"></span></code></pre></div><p>\u547D\u4EE4</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ /etc/init.d/nginx {start</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">stop</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">restart</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">reload</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">force-reload</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">status</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">configtest</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">rotate</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">upgrade}</span></span>
<span class="line"></span></code></pre></div><p>\u81EA\u5B9A\u4E49\u914D\u7F6E\uFF08\u4F7F\u7528octane\uFF09</p><p>vim /etc/nginx/nginx.conf</p><div class="language-ini"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">user  nginx</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">worker_processes  auto</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">error_log  /var/log/nginx/error.log notice</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">pid        /var/run/nginx.pid</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">events {</span></span>
<span class="line"><span style="color:#A6ACCD;">    worker_connections  1024</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">http {</span></span>
<span class="line"><span style="color:#A6ACCD;">    include       /etc/nginx/mime.types</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    default_type  application/octet-stream</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    log_format  main  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">$remote_addr - $remote_user [$time_local] &quot;$request&quot; </span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">                      </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">$status $body_bytes_sent &quot;$http_referer&quot; </span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">                      </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;</span><span style="color:#89DDFF;">&#39;</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    access_log  /var/log/nginx/access.log  main</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    sendfile        on</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">#tcp_nopush     on;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    keepalive_timeout  65</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">#gzip  on;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    map $http_upgrade $connection_upgrade {</span></span>
<span class="line"><span style="color:#A6ACCD;">        default upgrade</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">      close</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    include /etc/nginx/conf.d/*.conf</span><span style="color:#676E95;font-style:italic;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="php" tabindex="-1">PHP <a class="header-anchor" href="#php" aria-hidden="true">#</a></h2><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ apt-get install -y software-properties-common \\</span></span>
<span class="line"><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> add-apt-repository -y ppa:ondrej/php \\</span></span>
<span class="line"><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> apt-get update \\</span></span>
<span class="line"><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> apt-get install -y \\</span></span>
<span class="line"><span style="color:#A6ACCD;">php8.1 \\</span></span>
<span class="line"><span style="color:#A6ACCD;">php8.1-bcmath \\</span></span>
<span class="line"><span style="color:#A6ACCD;">php8.1-curl \\</span></span>
<span class="line"><span style="color:#A6ACCD;">php8.1-mbstring \\</span></span>
<span class="line"><span style="color:#A6ACCD;">php8.1-xml \\</span></span>
<span class="line"><span style="color:#A6ACCD;">php8.1-xmlrpc \\</span></span>
<span class="line"><span style="color:#A6ACCD;">php8.1-redis \\</span></span>
<span class="line"><span style="color:#A6ACCD;">php8.1-mysql \\</span></span>
<span class="line"><span style="color:#A6ACCD;">php8.1-pgsql \\</span></span>
<span class="line"><span style="color:#A6ACCD;">php8.1-sqlite3 \\</span></span>
<span class="line"><span style="color:#A6ACCD;">php8.1-swoole \\</span></span>
<span class="line"><span style="color:#A6ACCD;">php8.1-gd \\</span></span>
<span class="line"><span style="color:#A6ACCD;">php8.1-gmp \\</span></span>
<span class="line"><span style="color:#A6ACCD;">php8.1-zip</span></span>
<span class="line"></span></code></pre></div><h3 id="php-fpm" tabindex="-1">php-fpm <a class="header-anchor" href="#php-fpm" aria-hidden="true">#</a></h3><p>\u5B89\u88C5</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ apt-get install -y php8.1-fpm</span></span>
<span class="line"></span></code></pre></div><p>\u547D\u4EE4</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ /etc/init.d/php-fpm8.1 {start</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">stop</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">status</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">restart</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">reload</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">force-reload}</span></span>
<span class="line"></span></code></pre></div><h3 id="amqp" tabindex="-1">amqp <a class="header-anchor" href="#amqp" aria-hidden="true">#</a></h3><p>\u5B89\u88C5</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ apt-get install -y php8.1-amqp</span></span>
<span class="line"></span></code></pre></div><h3 id="composer" tabindex="-1">Composer <a class="header-anchor" href="#composer" aria-hidden="true">#</a></h3><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ php -r </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">copy(&#39;https://install.phpcomposer.com/installer&#39;, &#39;composer-setup.php&#39;);</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> php composer-setup.php --install-dir=/usr/bin --filename=composer</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="supervisor" tabindex="-1">Supervisor <a class="header-anchor" href="#supervisor" aria-hidden="true">#</a></h2><p>\u5B89\u88C5</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ apt-get install -y supervisor</span></span>
<span class="line"></span></code></pre></div><p>\u547D\u4EE4</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ /etc/init.d/supervisord {start</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">stop</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">restart</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">force-reload</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">status}</span></span>
<span class="line"></span></code></pre></div><h3 id="laravel-octane" tabindex="-1">Laravel octane <a class="header-anchor" href="#laravel-octane" aria-hidden="true">#</a></h3><p>\u914D\u7F6E\u6587\u4EF6: /etc/supervisor/conf.d/example.conf</p><h4 id="swoole" tabindex="-1">swoole <a class="header-anchor" href="#swoole" aria-hidden="true">#</a></h4><div class="language-ini"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">[program:example]</span></span>
<span class="line"><span style="color:#F07178;">process_name</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">%(program_name)s_%(process_num)02d</span></span>
<span class="line"><span style="color:#F07178;">command</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">/usr/bin/php /var/web/project/example/artisan octane:start --</span><span style="color:#F07178;">server</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">swoole --</span><span style="color:#F07178;">workers</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">1 --</span><span style="color:#F07178;">task-workers</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">2 --</span><span style="color:#F07178;">max-requests</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">200 --</span><span style="color:#F07178;">host</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">0.0.0.0 --</span><span style="color:#F07178;">port</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">8000</span></span>
<span class="line"><span style="color:#F07178;">stdout_logfile</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">/var/web/project/example/storage/logs/octane.log</span></span>
<span class="line"><span style="color:#F07178;">autostart</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">true</span></span>
<span class="line"><span style="color:#F07178;">autorestart</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">true</span></span>
<span class="line"><span style="color:#F07178;">user</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">root</span></span>
<span class="line"><span style="color:#F07178;">numprocs</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">1</span></span>
<span class="line"><span style="color:#F07178;">redirect_stderr</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">true</span></span>
<span class="line"><span style="color:#F07178;">stopwaitsecs</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">3600</span></span>
<span class="line"></span></code></pre></div><h4 id="roadrunner" tabindex="-1">roadrunner <a class="header-anchor" href="#roadrunner" aria-hidden="true">#</a></h4><div class="language-ini"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">[program:example]</span></span>
<span class="line"><span style="color:#F07178;">process_name</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">%(program_name)s_%(process_num)02d</span></span>
<span class="line"><span style="color:#F07178;">command</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">/usr/bin/php /var/web/project/example/artisan octane:start --</span><span style="color:#F07178;">server</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">roadrunner --</span><span style="color:#F07178;">host</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">0.0.0.0 --</span><span style="color:#F07178;">port</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">8000</span></span>
<span class="line"><span style="color:#F07178;">stdout_logfile</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">/var/web/project/example/storage/logs/octane.log</span></span>
<span class="line"><span style="color:#F07178;">autostart</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">true</span></span>
<span class="line"><span style="color:#F07178;">autorestart</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">true</span></span>
<span class="line"><span style="color:#F07178;">user</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">root</span></span>
<span class="line"><span style="color:#F07178;">numprocs</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">1</span></span>
<span class="line"><span style="color:#F07178;">redirect_stderr</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">true</span></span>
<span class="line"><span style="color:#F07178;">stopwaitsecs</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">3600</span></span>
<span class="line"></span></code></pre></div><h2 id="cron-\u5B9A\u65F6\u4EFB\u52A1" tabindex="-1">Cron(\u5B9A\u65F6\u4EFB\u52A1) <a class="header-anchor" href="#cron-\u5B9A\u65F6\u4EFB\u52A1" aria-hidden="true">#</a></h2><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ crontab -l </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> cat</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">* * * * * /usr/bin/php /var/web/project/example/artisan schedule:run &gt;&gt; /dev/null 2&gt;&amp;1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> crontab -</span></span>
<span class="line"></span></code></pre></div><h2 id="redis" tabindex="-1">Redis <a class="header-anchor" href="#redis" aria-hidden="true">#</a></h2><p>\u5B89\u88C5</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ apt-get install -y redis-server</span></span>
<span class="line"></span></code></pre></div><p>\u547D\u4EE4</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ /etc/init.d/redis-server {start</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">stop</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">restart</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">force-reload</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">status}</span></span>
<span class="line"></span></code></pre></div><h2 id="postgresql" tabindex="-1">PostgreSQL <a class="header-anchor" href="#postgresql" aria-hidden="true">#</a></h2><p>\u5B89\u88C5</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> sudo apt-key add -</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo apt-get update</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo apt-get -y install postgresql</span></span>
<span class="line"></span></code></pre></div><p>\u547D\u4EE4</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">/etc/init.d/postgresql {start</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">stop</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">restart</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">reload</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">force-reload</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">status}</span></span>
<span class="line"></span></code></pre></div><p>\u914D\u7F6E /etc/postgresql/14/main</p><h3 id="\u8FDC\u7A0B\u8FDE\u63A5" tabindex="-1">\u8FDC\u7A0B\u8FDE\u63A5 <a class="header-anchor" href="#\u8FDC\u7A0B\u8FDE\u63A5" aria-hidden="true">#</a></h3><p>1.\u6DFB\u52A0\u5141\u8BB8\u8BBF\u95EE\u7684IP\u548C\u9A8C\u8BC1\u65B9\u5F0F<br> /etc/postgresql/14/main/pg_hba.conf</p><div class="language-ini"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">host    all     all     0.0.0.0/0       md5</span></span>
<span class="line"></span></code></pre></div><p>2.\u4FEE\u6539\u76D1\u542C\u5730\u5740<br> /etc/postgresql/14/main/postgresql.conf</p><div class="language-ini"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">#listen_addresses = &#39;localhost&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#\u4FEE\u6539\u4E3A</span></span>
<span class="line"><span style="color:#F07178;">listen_addresses</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">*</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre></div><p>3.\u91CD\u542F\u670D\u52A1</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ /etc/init.d/postgresql restart</span></span>
<span class="line"></span></code></pre></div><h3 id="\u4FEE\u6539\u7AEF\u53E3\u53F7-\u6700\u5927\u8FDE\u63A5\u6570" tabindex="-1">\u4FEE\u6539\u7AEF\u53E3\u53F7/\u6700\u5927\u8FDE\u63A5\u6570 <a class="header-anchor" href="#\u4FEE\u6539\u7AEF\u53E3\u53F7-\u6700\u5927\u8FDE\u63A5\u6570" aria-hidden="true">#</a></h3><p>/etc/postgresql/14/main/postgresql.conf</p><div class="language-ini"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">port</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> 54321                            </span><span style="color:#676E95;font-style:italic;"># (change requires restart)</span></span>
<span class="line"><span style="color:#F07178;">max_connections</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> 100</span></span>
<span class="line"></span></code></pre></div><h3 id="\u57FA\u7840\u64CD\u4F5C" tabindex="-1">\u57FA\u7840\u64CD\u4F5C <a class="header-anchor" href="#\u57FA\u7840\u64CD\u4F5C" aria-hidden="true">#</a></h3><p>\u5207\u6362postgres\u7528\u6237\u767B\u5F55</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ su postgres</span></span>
<span class="line"></span></code></pre></div><p>\u8FDE\u63A5\u6570\u636E\u5E93</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ psql</span></span>
<span class="line"></span></code></pre></div><p>\u4FEE\u6539\u9ED8\u8BA4\u7528\u6237\u5BC6\u7801</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">\\password postgres</span></span>
<span class="line"></span></code></pre></div><p>\u521B\u5EFA\u65B0\u7528\u6237</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ create user test_user with password </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123456</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u521B\u5EFA\u6570\u636E\u5E93</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ create database test_db owner test_user</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><p>\u6388\u6743</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ grant all privileges on database test_db to test_user</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><h2 id="swap\u5206\u533A-\u5C0F\u5185\u5B58\u4E3B\u673A" tabindex="-1">Swap\u5206\u533A(\u5C0F\u5185\u5B58\u4E3B\u673A) <a class="header-anchor" href="#swap\u5206\u533A-\u5C0F\u5185\u5B58\u4E3B\u673A" aria-hidden="true">#</a></h2><p>1.\u9996\u5148\u5148\u5173\u95EDSwap\u5206\u533A\uFF0C\u5C06\u9ED8\u8BA4\u7684Swap\u5206\u533A\u6E05\u7A7A\uFF1A</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ swapoff -a</span></span>
<span class="line"></span></code></pre></div><p>2.\u521B\u5EFA\u8981Swap\u5206\u533A\u6587\u4EF6 \u5176\u4E2D/var/swapfile\u662F\u6587\u4EF6\u4F4D\u7F6E\uFF0Cbs*count\u662F\u6587\u4EF6\u5927\u4E0B\uFF0C\u4F8B\u5982\u4EE5\u4E0B\u547D\u4EE4\u5C31\u4F1A\u521B\u5EFA\u4E00\u4E2A4G\u7684\u6587\u4EF6\uFF1A</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ dd if=/dev/zero of=/var/swapfile bs=1M count=4096</span></span>
<span class="line"></span></code></pre></div><p>3\u3001\u683C\u5F0F\u5316\u4E3ASwap\u5206\u533A\u6587\u4EF6</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ mkswap /var/swapfile</span></span>
<span class="line"></span></code></pre></div><p>4\u3001\u542F\u7528Swap\u5206\u533A</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ swapon /var/swapfile</span></span>
<span class="line"></span></code></pre></div><p>5\u3001\u67E5\u770B\u65B0\u7684\u5206\u533A</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ free -m</span></span>
<span class="line"></span></code></pre></div><p>6\u3001\u8BBE\u7F6E\u5F00\u673A\u542F\u52A8</p><p>\u6700\u540E\u5C31\u662F\u589E\u52A0\u5F00\u673A\u542F\u52A8\u4E86\uFF0C\u53EA\u9700\u8981\u5728/etc/fstab\u8FD9\u4E2A\u6587\u4EF6\u91CC\u589E\u52A0\u8FD9\u4E00\u884C\u4EE3\u7801\u5373\u53EF\uFF08\u5982\u679C\u4F60\u4E0D\u4F1A\u5728Linux\u4E0A\u7F16\u8F91\u6587\u4EF6\uFF0C\u53EF\u4EE5\u53C2\u8003\uFF1A\u300ALinux\u4E0B\u4F7F\u7528vim\u7F16\u8F91\u4EE5\u53CA\u65B0\u5EFA\u6587\u4EF6\u300B\uFF09\uFF1A</p><div class="language-sh"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">$ </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/etc/fstab</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> /var/swapfile swap swap defaults 0 0</span></span>
<span class="line"></span></code></pre></div>`,102),o=[e];function c(r,t,i,d,y,D){return n(),a("div",null,o)}var h=s(l,[["render",c]]);export{A as __pageData,h as default};
