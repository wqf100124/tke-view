import{_ as n,c as l,e as p,b as s,d as o,a as e,o as t,r as c}from"./app.523600ac.js";const r="/tke-view/image/screenshots/wso2/user/3.png",D="/tke-view/image/screenshots/wso2/user/4.png",i="/tke-view/image/screenshots/wso2/user/5.png",y="/tke-view/image/screenshots/wso2/user/6.png",F="/tke-view/image/screenshots/wso2/user/7.png",A="/tke-view/image/screenshots/wso2/user/8.png",C="/tke-view/image/screenshots/wso2/user/oauth-1.png",d="/tke-view/image/screenshots/wso2/user/oauth-2.png",h="/tke-view/image/screenshots/wso2/user/oauth-3.png",u="/tke-view/image/screenshots/wso2/user/subscribe-1.png",_="/tke-view/image/screenshots/wso2/user/subscribe-2.png",E="/tke-view/image/screenshots/wso2/user/14.png",m="/tke-view/image/screenshots/wso2/user/15.png",P=JSON.parse('{"title":"\u4F7F\u7528\u5916\u90E8\u63A5\u53E3","description":"","frontmatter":{},"headers":[{"level":2,"title":"1.\u521B\u5EFAApi","slug":"_1-\u521B\u5EFAapi","link":"#_1-\u521B\u5EFAapi","children":[]},{"level":2,"title":"2.\u521B\u5EFAApp","slug":"_2-\u521B\u5EFAapp","link":"#_2-\u521B\u5EFAapp","children":[]},{"level":2,"title":"3.\u751F\u6210OAuth\u8BA4\u8BC1\u5BC6\u94A5","slug":"_3-\u751F\u6210oauth\u8BA4\u8BC1\u5BC6\u94A5","link":"#_3-\u751F\u6210oauth\u8BA4\u8BC1\u5BC6\u94A5","children":[]},{"level":2,"title":"4.\u7ED1\u5B9AApi\u548CApp","slug":"_4-\u7ED1\u5B9Aapi\u548Capp","link":"#_4-\u7ED1\u5B9Aapi\u548Capp","children":[]},{"level":2,"title":"5.\u5728View\u4E2D\u4F7F\u7528","slug":"_5-\u5728view\u4E2D\u4F7F\u7528","link":"#_5-\u5728view\u4E2D\u4F7F\u7528","children":[{"level":3,"title":"\u6DFB\u52A0\u914D\u7F6E\u4FE1\u606F","slug":"\u6DFB\u52A0\u914D\u7F6E\u4FE1\u606F","link":"#\u6DFB\u52A0\u914D\u7F6E\u4FE1\u606F","children":[]},{"level":3,"title":"\u53D1\u9001\u8BF7\u6C42","slug":"\u53D1\u9001\u8BF7\u6C42","link":"#\u53D1\u9001\u8BF7\u6C42","children":[]},{"level":3,"title":"\u5904\u7406\u54CD\u5E94","slug":"\u5904\u7406\u54CD\u5E94","link":"#\u5904\u7406\u54CD\u5E94","children":[]}]},{"level":2,"title":"6.\u63A5\u53E3\u8C03\u8BD5","slug":"_6-\u63A5\u53E3\u8C03\u8BD5","link":"#_6-\u63A5\u53E3\u8C03\u8BD5","children":[{"level":3,"title":"\u83B7\u53D6AccessToken","slug":"\u83B7\u53D6accesstoken","link":"#\u83B7\u53D6accesstoken","children":[]},{"level":3,"title":"\u8BF7\u6C42API(WSO2\u76F4\u8FDE)","slug":"\u8BF7\u6C42api-wso2\u76F4\u8FDE","link":"#\u8BF7\u6C42api-wso2\u76F4\u8FDE","children":[]},{"level":3,"title":"\u8BF7\u6C42API(View\u4E2D\u4F7F\u7528WSO2)","slug":"\u8BF7\u6C42api-view\u4E2D\u4F7F\u7528wso2","link":"#\u8BF7\u6C42api-view\u4E2D\u4F7F\u7528wso2","children":[]}]}],"relativePath":"wso2/consumer.md"}'),w={name:"wso2/consumer.md"},g=s("h1",{id:"\u4F7F\u7528\u5916\u90E8\u63A5\u53E3",tabindex:"-1"},[o("\u4F7F\u7528\u5916\u90E8\u63A5\u53E3 "),s("a",{class:"header-anchor",href:"#\u4F7F\u7528\u5916\u90E8\u63A5\u53E3","aria-hidden":"true"},"#")],-1),B=s("blockquote",null,[s("p",null,"View \u901A\u8FC7 WSO2 \u8BF7\u6C42\u7B2C\u4E09\u65B9\u7CFB\u7EDF API")],-1),f=e('<h2 id="_1-\u521B\u5EFAapi" tabindex="-1">1.\u521B\u5EFAApi <a class="header-anchor" href="#_1-\u521B\u5EFAapi" aria-hidden="true">#</a></h2><p>\u6253\u5F00 Api \u7BA1\u7406\u9875\u9762\u5E76\u767B\u5F55: <a href="https://localhost:9443/publisher" target="_blank" rel="noreferrer">https://localhost:9443/publisher</a><br> \u8D26\u53F7: <code>admin</code><br> \u5BC6\u7801: <code>admin</code></p><p>\u9009\u62E9\u3010REST API\u3011\u7C7B\u578B\u7684\u63A5\u53E3 <img src="'+r+'" alt=""></p><p>\u70B9\u51FB\u3010Start From Scratch\u3011 \u521B\u5EFA\u65B0\u7684 API <img src="'+D+'" alt=""> \u586B\u5165\u63A5\u53E3\u4FE1\u606F <img src="'+i+'" alt=""></p><p>\u914D\u7F6E\u7B2C\u4E09\u65B9\u63A5\u53E3\u7684\u8BA4\u8BC1\u4FE1\u606F <img src="'+y+'" alt=""></p><h2 id="_2-\u521B\u5EFAapp" tabindex="-1">2.\u521B\u5EFAApp <a class="header-anchor" href="#_2-\u521B\u5EFAapp" aria-hidden="true">#</a></h2><p>\u6253\u5F00 App \u7BA1\u7406\u9875\u9762: <a href="https://localhost:9443/devportal/applications" target="_blank" rel="noreferrer">https://localhost:9443/devportal/applications</a></p><p>\u70B9\u51FB\u3010ADD NEW APPLICATION\u3011\u6309\u94AE <img src="'+F+'" alt=""> \u586B\u5165\u4FE1\u606F\u5E76\u4FDD\u5B58 <img src="'+A+'" alt=""></p><h2 id="_3-\u751F\u6210oauth\u8BA4\u8BC1\u5BC6\u94A5" tabindex="-1">3.\u751F\u6210OAuth\u8BA4\u8BC1\u5BC6\u94A5 <a class="header-anchor" href="#_3-\u751F\u6210oauth\u8BA4\u8BC1\u5BC6\u94A5" aria-hidden="true">#</a></h2><p>\u5207\u6362\u5230\u3010Oauth2 Tokens\u3011\u83DC\u5355\u680F <img src="'+C+'" alt=""> \u70B9\u51FB\u3010GENERATE KEYS\u3011\u751F\u6210\u65B0\u7684\u8BA4\u8BC1\u5BC6\u94A5 <img src="'+d+'" alt=""> \u67E5\u770B\u65B0\u751F\u6210\u7684\u5BC6\u94A5\u4FE1\u606F <img src="'+h+'" alt=""></p><h2 id="_4-\u7ED1\u5B9Aapi\u548Capp" tabindex="-1">4.\u7ED1\u5B9AApi\u548CApp <a class="header-anchor" href="#_4-\u7ED1\u5B9Aapi\u548Capp" aria-hidden="true">#</a></h2><p>\u5207\u6362\u5230\u3010Subscriptions\u3011\u83DC\u5355\u680F\uFF0C\u7136\u540E\u70B9\u51FB\u9875\u9762\u4E0A\u7684\u3010+SUBSCRIBE APIS\u3011\u6309\u94AE <img src="'+u+'" alt=""> \u5728\u5F39\u51FA\u7684\u9875\u9762\u4E2D\u9009\u62E9\u9700\u8981\u7ED1\u5B9A\u7684API\uFF0C\u70B9\u51FB\u3010SUBSCRIBE\u3011\u6309\u94AE <img src="'+_+`" alt=""></p><h2 id="_5-\u5728view\u4E2D\u4F7F\u7528" tabindex="-1">5.\u5728View\u4E2D\u4F7F\u7528 <a class="header-anchor" href="#_5-\u5728view\u4E2D\u4F7F\u7528" aria-hidden="true">#</a></h2><h3 id="\u6DFB\u52A0\u914D\u7F6E\u4FE1\u606F" tabindex="-1">\u6DFB\u52A0\u914D\u7F6E\u4FE1\u606F <a class="header-anchor" href="#\u6DFB\u52A0\u914D\u7F6E\u4FE1\u606F" aria-hidden="true">#</a></h3><p>\u5728\u9879\u76EE\u7684 <code>core</code> \u6587\u4EF6\u5939\u4E0B\u65B0\u5EFA\u4E00\u4E2A\u540D\u4E3A: <code>.restfulapi.authentication.ini</code> \u7684\u6587\u4EF6\uFF08\u6587\u4EF6\u540D\u4EE5&#39;.&#39;\u53F7\u5F00\u59CB\uFF09\uFF0C\u5E76\u590D\u5236\u7C98\u8D34\u4EE5\u4E0B\u5185\u5BB9\u3002</p><div class="language-ini"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki has-highlighted-lines"><code><span class="line"><span style="color:#676E95;">;\u914D\u7F6E\u9879\u540D\u79F0</span></span>
<span class="line"><span style="color:#89DDFF;">[APPLICATION_DEMO]</span></span>
<span class="line"><span style="color:#676E95;">;WSO2\u7684OAuth\u8BA4\u8BC1\u63A5\u53E3</span></span>
<span class="line"><span style="color:#F07178;">gatewayAuthUrl</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://172.16.1.94:9443/oauth2</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line highlighted"><span style="color:#676E95;">;WSO2\u7684Oauth\u5E10\u53F7\u4FE1\u606F</span></span>
<span class="line highlighted"><span style="color:#F07178;">consumerKey</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Gyf9T2mZRqiyC7z7kw8_g8ngxnoa</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#F07178;">consumerSecret</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Xh6_eLPWaPBbUMfkUld72GG6JL4a</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#676E95;">;WSO2\u4E2D\u7684API\u63A5\u53E3\u5730\u5740</span></span>
<span class="line"><span style="color:#F07178;">gatewayRecourceUrl</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://172.16.1.94:8243</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><ul><li>\u914D\u7F6E\u9879\u540D\u79F0\u5BF9\u5E94 Application \u7684\u540D\u79F0</li><li>consumerKey \u5BF9\u5E94 OAuth2 \u7684 <code>Consumer Key</code> \u548C <code>Consumer Secret</code></li></ul><h3 id="\u53D1\u9001\u8BF7\u6C42" tabindex="-1">\u53D1\u9001\u8BF7\u6C42 <a class="header-anchor" href="#\u53D1\u9001\u8BF7\u6C42" aria-hidden="true">#</a></h3><p>\u5728\u9879\u76EE\u4E2D\u65B0\u5EFA\u4E00\u4E2A <code>core/web/wso2.php</code> \u7684\u6D4B\u8BD5\u6587\u4EF6\uFF0C\u5E76\u590D\u5236\u7C98\u8D34\u4EE5\u4E0B\u4EE3\u7801\u3002</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">&lt;?</span><span style="color:#A6ACCD;">php</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> NO_USER_REQUIRED       </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> NO_PERMISSION_REQUIRED </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">require_once</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;{$</span><span style="color:#A6ACCD;">_SERVER</span><span style="color:#89DDFF;">[&#39;</span><span style="color:#C3E88D;">DOCUMENT_ROOT</span><span style="color:#89DDFF;">&#39;]}</span><span style="color:#C3E88D;">/../sys/libs/init.lib</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">require_once</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;{$</span><span style="color:#A6ACCD;">_SERVER</span><span style="color:#89DDFF;">[&#39;</span><span style="color:#C3E88D;">DOCUMENT_ROOT</span><span style="color:#89DDFF;">&#39;]}</span><span style="color:#C3E88D;">/../sys/libs/logic/Util/Gateway/ViewGateway.lib</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">use</span><span style="color:#FFCB6B;"> </span><span style="color:#A6ACCD;">VIEW</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">Util</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">Gateway</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">ViewGateway</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// .ini\u6587\u4EF6\u4E2D\u7684\u914D\u7F6E\u9879\u540D\u79F0</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> CONFIG_NAME </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">APPLICATION_DEMO</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;">// API\u540D\u79F0</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> API_NAME </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Demo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;">// API\u8DEF\u5F84(context)</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> API_URI </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/demo</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;">// API\u7248\u672C</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> API_VERSION </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1.0</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">viewGateway </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ViewGateway</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">CONFIG_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// \u53D1\u9001\u8BF7\u6C42</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">result </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">viewGateway</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">post</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">API_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[],</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null,</span><span style="color:#A6ACCD;"> API_VERSION</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> API_URI</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">empty</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">result</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;">// \u63A5\u53E3\u8BF7\u6C42\u5931\u8D25\uFF0C\u8BB0\u5F55\u65E5\u5FD7</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">catch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">var_dump</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">e</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="\u5904\u7406\u54CD\u5E94" tabindex="-1">\u5904\u7406\u54CD\u5E94 <a class="header-anchor" href="#\u5904\u7406\u54CD\u5E94" aria-hidden="true">#</a></h3><p>\u521B\u5EFA\u5904\u7406\u6587\u4EF6: <code>core/sys/libs/logic/Util/Gateway/Handler/DemoGatewayBizHandler.php</code></p><p><em>\u6587\u4EF6\u547D\u540D\u89C4\u8303\uFF1A&lt;App\u540D\u79F0&gt;GatewayBizHandler.php</em></p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">&lt;?</span><span style="color:#A6ACCD;">php</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">namespace</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">VIEW</span><span style="color:#89DDFF;">\\</span><span style="color:#FFCB6B;">Util</span><span style="color:#89DDFF;">\\</span><span style="color:#FFCB6B;">Gateway</span><span style="color:#89DDFF;">\\</span><span style="color:#FFCB6B;">Handler</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">require_once</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;{$</span><span style="color:#A6ACCD;">_SERVER</span><span style="color:#89DDFF;">[&#39;</span><span style="color:#C3E88D;">DOCUMENT_ROOT</span><span style="color:#89DDFF;">&#39;]}</span><span style="color:#C3E88D;">/../sys/libs/curl_api_adapter/curl.lib</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">require_once</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;{$</span><span style="color:#A6ACCD;">_SERVER</span><span style="color:#89DDFF;">[&#39;</span><span style="color:#C3E88D;">DOCUMENT_ROOT</span><span style="color:#89DDFF;">&#39;]}</span><span style="color:#C3E88D;">/../sys/libs/view_exceptions/autoloader.php</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">require_once</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">SYSTEM_DIR </span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/libs/logic/external_access_logger/bo/ExternalAccessLogger.lib</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">require_once</span><span style="color:#A6ACCD;"> SYSTEM_DIR </span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/libs/jwt_wrapper/autoloader.php</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">use</span><span style="color:#FFCB6B;"> </span><span style="color:#A6ACCD;">VIEW</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">Util</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">Gateway</span><span style="color:#89DDFF;">\\</span><span style="color:#A6ACCD;">ViewGatewayBizHandlerBaseService</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DemoGatewayBizHandler</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ViewGatewayBizHandlerBaseService</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">/**</span></span>
<span class="line"><span style="color:#676E95;">     * Demo</span></span>
<span class="line"><span style="color:#676E95;">     *</span></span>
<span class="line"><span style="color:#676E95;">     * </span><span style="color:#F78C6C;">@param</span><span style="color:#676E95;"> $applicationName</span></span>
<span class="line"><span style="color:#676E95;">     * </span><span style="color:#F78C6C;">@param</span><span style="color:#676E95;"> $apiName</span></span>
<span class="line"><span style="color:#676E95;">     * </span><span style="color:#F78C6C;">@param</span><span style="color:#676E95;"> $requestMethod</span></span>
<span class="line"><span style="color:#676E95;">     * </span><span style="color:#F78C6C;">@param</span><span style="color:#676E95;"> $requestData</span></span>
<span class="line"><span style="color:#676E95;">     * </span><span style="color:#F78C6C;">@param</span><span style="color:#676E95;"> $version</span></span>
<span class="line"><span style="color:#676E95;">     * </span><span style="color:#F78C6C;">@param</span><span style="color:#676E95;"> $retutrnValue</span></span>
<span class="line"><span style="color:#676E95;">     * </span><span style="color:#F78C6C;">@param</span><span style="color:#676E95;"> $identifier</span></span>
<span class="line"><span style="color:#676E95;">     */</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onFinish</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">applicationName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">apiName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">requestMethod</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">requestData</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">version</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">retutrnValue</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">identifier</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">var_dump</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">retutrnValue</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">parent</span><span style="color:#89DDFF;">::</span><span style="color:#82AAFF;">onFinish</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">applicationName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">apiName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">requestMethod</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">requestData</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">version</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">retutrnValue</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">identifier</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="_6-\u63A5\u53E3\u8C03\u8BD5" tabindex="-1">6.\u63A5\u53E3\u8C03\u8BD5 <a class="header-anchor" href="#_6-\u63A5\u53E3\u8C03\u8BD5" aria-hidden="true">#</a></h2><h3 id="\u83B7\u53D6accesstoken" tabindex="-1">\u83B7\u53D6AccessToken <a class="header-anchor" href="#\u83B7\u53D6accesstoken" aria-hidden="true">#</a></h3><p>1.\u6253\u5F00\u8C03\u8BD5\u5DE5\u5177\uFF0C\u4F7F\u7528 <code>POST</code> \u65B9\u6CD5\u8BF7\u6C42URL: <code>https://localhost:9443/oauth2/token</code><br> 2.\u8BA4\u8BC1\u65B9\u5F0F\u9009\u62E9 <code>Basic Auth</code>\uFF0C\u8D26\u53F7\u5BC6\u7801\u586B\u5199 OAuth2 \u7684 <code>Key</code> \u548C <code>Secret</code><img src="`+E+'" alt=""> \u5728\u8BF7\u6C42\u7684 <code>Body</code> \u4E2D\u6DFB\u52A0 <code>grant_type:client_credentials</code> \u4FE1\u606F <img src="'+m+'" alt=""></p><h3 id="\u8BF7\u6C42api-wso2\u76F4\u8FDE" tabindex="-1">\u8BF7\u6C42API(WSO2\u76F4\u8FDE) <a class="header-anchor" href="#\u8BF7\u6C42api-wso2\u76F4\u8FDE" aria-hidden="true">#</a></h3><p>1.\u6253\u5F00\u8C03\u8BD5\u5DE5\u5177\uFF0C\u4F7F\u7528 <code>POST</code> \u65B9\u6CD5\u8BF7\u6C42URL: <code>https://localhost:8243/demo/1.0</code><br> 2.\u8BA4\u8BC1\u65B9\u5F0F\u9009\u62E9 <code>Bearer Token</code>\uFF0CToken\u5185\u5BB9\u4F7F\u7528\u4E0A\u9762\u83B7\u53D6\u7684 <code>access_token</code></p><h3 id="\u8BF7\u6C42api-view\u4E2D\u4F7F\u7528wso2" tabindex="-1">\u8BF7\u6C42API(View\u4E2D\u4F7F\u7528WSO2) <a class="header-anchor" href="#\u8BF7\u6C42api-view\u4E2D\u4F7F\u7528wso2" aria-hidden="true">#</a></h3><p>\u8BBF\u95EE\u4F60\u7684URL\u5982: <code>https://localhost:8243/wso2.php</code></p>',31);function v(b,k,I,S,O,$){const a=c("Mermaid");return t(),l("div",null,[g,B,p(a,{id:"mermaid_1a962852",graph:"flowchart%20LR%0AA(View)%20%26%20B(VFM)%20---%3E%20C(%5BWSO2%5D)%20---%3E%20D%5B%5B%E7%AC%AC%E4%B8%89%E6%96%B9%E7%B3%BB%E7%BB%9FA%5D%5D%20%26%20E%5B%5B%E7%AC%AC%E4%B8%89%E6%96%B9%E7%B3%BB%E7%BB%9FB%5D%5D%20%26%20F%5B%5B%E7%AC%AC%E4%B8%89%E6%96%B9%E7%B3%BB%E7%BB%9FC%5D%5D%0Astyle%20A%20fill%3A%237b1fa2%2Ccolor%3A%23fff%2Cstroke-width%3A0%0Astyle%20B%20fill%3A%234caf50%2Ccolor%3A%23fff%2Cstroke-width%3A0%0Astyle%20C%20fill%3A%23ff7300%2Ccolor%3A%23fff%2Cstroke-width%3A0%0Astyle%20D%20fill%3A%233a49ab%2Ccolor%3A%23fff%2Cstroke-width%3A0%0Astyle%20E%20fill%3A%233a49ab%2Ccolor%3A%23fff%2Cstroke-width%3A0%0Astyle%20F%20fill%3A%233a49ab%2Ccolor%3A%23fff%2Cstroke-width%3A0"}),f])}const q=n(w,[["render",v]]);export{P as __pageData,q as default};
