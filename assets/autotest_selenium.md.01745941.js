import{_ as s,c as a,o as e,a as l}from"./app.0ff1bfb5.js";const F=JSON.parse('{"title":"Selenium","description":"","frontmatter":{},"headers":[{"level":2,"title":"准备工作","slug":"准备工作","link":"#准备工作","children":[]},{"level":2,"title":"测试命令","slug":"测试命令","link":"#测试命令","children":[]},{"level":2,"title":"监听调试过程","slug":"监听调试过程","link":"#监听调试过程","children":[]},{"level":2,"title":"辅助工具","slug":"辅助工具","link":"#辅助工具","children":[]},{"level":2,"title":"常见问题","slug":"常见问题","link":"#常见问题","children":[{"level":3,"title":"1.运行RC的自动化测试代码","slug":"_1-运行rc的自动化测试代码","link":"#_1-运行rc的自动化测试代码","children":[]},{"level":3,"title":"2.容器中代码格式未对齐","slug":"_2-容器中代码格式未对齐","link":"#_2-容器中代码格式未对齐","children":[]}]}],"relativePath":"autotest/selenium.md"}'),n={name:"autotest/selenium.md"},p=l(`<h1 id="selenium" tabindex="-1">Selenium <a class="header-anchor" href="#selenium" aria-hidden="true">#</a></h1><blockquote><p><a href="https://www.selenium.dev/zh-cn/" target="_blank" rel="noreferrer">Selenium</a> 是支持 web 浏览器自动化的一系列工具和库的综合项目。它可以直接运行在浏览器中，就像真正的用户在操作一样。</p></blockquote><p>参考文档: <a href="https://github.com/SeleniumHQ/docker-selenium" target="_blank" rel="noreferrer">https://github.com/SeleniumHQ/docker-selenium</a></p><p>Behat语法: <a href="https://docs.behat.org/en/latest/" target="_blank" rel="noreferrer">https://docs.behat.org/en/latest/</a></p><h2 id="准备工作" tabindex="-1">准备工作 <a class="header-anchor" href="#准备工作" aria-hidden="true">#</a></h2><p>1.修改hostUrl</p><p>以默认配置为例，修改 <code>autotest/selenium/config.xml</code> 文件中的 <code>hostUrl</code> 配置项：</p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight has-diff" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">element</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hostUrl</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">https://selenium.tkeasia.com/</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">http://172.16.1.44:4444</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">element</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>2.修改底层代码</p><ul><li><code>autotest/selenium/library/FeatureContext.php</code></li><li><code>autotest/selenium/library/GlobalContext.php</code> (global环境)</li></ul><p>修改 <code>$isServer</code> 变量</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight has-diff" tabindex="0"><code><span class="line diff remove"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">isServer </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">file_exists</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/opt/dennis</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">isServer </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span></code></pre></div><p>注释掉 <code>require_once(&#39;SeleniumDatabase.php&#39;);</code> 方法</p><div class="language-php"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki material-theme-palenight has-diff" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">isServer</span><span style="color:#89DDFF;">){</span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">require_once</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">SeleniumDatabase.php</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff add"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// require_once(&#39;SeleniumDatabase.php&#39;); </span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">arr </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$this-&gt;</span><span style="color:#A6ACCD;">seleniumService</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#82AAFF;">getPredefinedConstants</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">foreach</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">arr </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">key </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(!</span><span style="color:#82AAFF;">defined</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">define</span><span style="color:#89DDFF;">($</span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="测试命令" tabindex="-1">测试命令 <a class="header-anchor" href="#测试命令" aria-hidden="true">#</a></h2><p>1.进入容器</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-w</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/tke/autotest/selenium</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">autotest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sh</span></span>
<span class="line"></span></code></pre></div><p>2.执行测试命令</p><p>下面的几种方式都可以运行测试脚本</p><p>运行包含 <code>@Example</code> 标签的测试脚本</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">behat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--tags</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Example</span></span>
<span class="line"></span></code></pre></div><p>运行文件路径为 <code>features/Example.feature</code> 的测试脚本</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">behat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">features/Example.feature</span></span>
<span class="line"></span></code></pre></div><p>运行 <code>feature</code> 名称为 <code>Example</code> 的测试脚本</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">behat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Example</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre></div><h2 id="监听调试过程" tabindex="-1">监听调试过程 <a class="header-anchor" href="#监听调试过程" aria-hidden="true">#</a></h2><ul><li>调试窗口: <a href="http://localhost:7900" target="_blank" rel="noreferrer">http://localhost:7900</a></li></ul><p>提示：如无法访问，请检查selenium容器是否在运行。</p><h2 id="辅助工具" tabindex="-1">辅助工具 <a class="header-anchor" href="#辅助工具" aria-hidden="true">#</a></h2><ul><li><a href="https://testsupport.tkeasia.com/" target="_blank" rel="noreferrer">View自动化测试工具</a></li><li><a href="https://microsoftedge.microsoft.com/addons/detail/selenium-ide/ajdpfmkffanmkhejnopjppegokpogffp?hl=zh-CN" target="_blank" rel="noreferrer">Selenium浏览器插件</a></li></ul><h2 id="常见问题" tabindex="-1">常见问题 <a class="header-anchor" href="#常见问题" aria-hidden="true">#</a></h2><h3 id="_1-运行rc的自动化测试代码" tabindex="-1">1.运行RC的自动化测试代码 <a class="header-anchor" href="#_1-运行rc的自动化测试代码" aria-hidden="true">#</a></h3><p>使用Dev2的 <code>autotest/selenium/library</code> 来替换RC的 <code>autotest/selenium/library</code> 目录，其它配置参照上面的步骤即可。</p><h3 id="_2-容器中代码格式未对齐" tabindex="-1">2.容器中代码格式未对齐 <a class="header-anchor" href="#_2-容器中代码格式未对齐" aria-hidden="true">#</a></h3><p>设置编辑器: 使用4个空格代替tab键</p>`,35),o=[p];function t(r,c,i,D,y,d){return e(),a("div",null,o)}const h=s(n,[["render",t]]);export{F as __pageData,h as default};
